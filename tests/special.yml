# The `?` wildcard matches Unicode characters rather than bytes.
# This differs from Git which requires `??` to match two-byte characters like `Ä‡`.

- name: fuzzy test cases
  gitignore: |
    ?
  cases:
    - path: Ä‡
      description: Is multibyte
      dir: true
      ignored: false
    - path: Ä‡
      description: Is multibyte
      ignored: false

- name: fuzzy test cases
  gitignore: |
    ??
  cases:
    - path: Ä‡
      description: Should match the expression ??
      dir: true
      ignored: true
    - path: Ä‡
      description: Should match the expression ??
      ignored: true

- name: various multibyte characters single question mark
  gitignore: |
    ?
  cases:
    - path: Ã©
      description: e-acute (2 bytes) should not match single ?
      ignored: false
    - path: Ã©
      dir: true
      ignored: false
    - path: Ã±
      description: n-tilde (2 bytes) should not match single ?
      ignored: false
    - path: Ã±
      dir: true
      ignored: false
    - path: Ã¼
      description: u-umlaut (2 bytes) should not match single ?
      ignored: false
    - path: ÃŸ
      description: German eszett (2 bytes) should not match single ?
      ignored: false

- name: various multibyte characters double question mark  
  gitignore: |
    ??
  cases:
    - path: Ã©
      description: e-acute (2 bytes) should match ??
      ignored: true
    - path: Ã©
      dir: true
      ignored: true
    - path: Ã±
      description: n-tilde (2 bytes) should match ??
      ignored: true
    - path: Ã±
      dir: true
      ignored: true
    - path: Ã¼
      description: u-umlaut (2 bytes) should match ??
      ignored: true
    - path: ÃŸ
      description: German eszett (2 bytes) should match ??
      ignored: true

- name: three byte unicode characters
  gitignore: |
    ???
  cases:
    - path: â‚½
      description: Ruble symbol (3 bytes) should match ???
      ignored: true
    - path: â‚½
      dir: true
      ignored: true
    - path: â‚¬
      description: Euro symbol (3 bytes) should match ???
      ignored: true
    - path: â™ 
      description: Spade symbol (3 bytes) should match ???
      ignored: true

- name: four byte unicode characters
  gitignore: |
    ????
  cases:
    - path: ðŸš€
      description: Rocket emoji (4 bytes) should match ????
      ignored: true
    - path: ðŸš€
      dir: true
      ignored: true
    - path: ðŸŽ‰
      description: Party emoji (4 bytes) should match ????
      ignored: true
    - path: ðŸ’»
      description: Computer emoji (4 bytes) should match ????
      ignored: true

- name: mixed ascii and unicode with question marks
  gitignore: |
    file?.txt
    data??.json
    test???.log
  cases:
    - path: "filea.txt"
      description: ASCII 'a' (1 byte) should match file?.txt
      ignored: true
    - path: "file1.txt"
      description: ASCII '1' (1 byte) should match file?.txt
      ignored: true
    - path: "fileÄ‡.txt"
      description: Unicode Ä‡ (2 bytes) should not match file?.txt
      ignored: false
    - path: "dataab.json"
      description: ASCII 'ab' (2 bytes) should match data??.json
      ignored: true
    - path: "dataÃ©.json" 
      description: Unicode Ã© (2 bytes) should match data??.json
      ignored: true
    - path: "dataÄ‡x.json"
      description: Ä‡ (2 bytes) + x (1 byte) should not match data??.json  
      ignored: false
    - path: "testabc.log"
      description: ASCII 'abc' (3 bytes) should match test???.log
      ignored: true
    - path: "testÃ©x.log"
      description: Ã© (2 bytes) + x (1 byte) should match test???.log
      ignored: true
    - path: "testâ‚¬.log"
      description: Euro â‚¬ (3 bytes) should match test???.log
      ignored: true

- name: complex patterns with unicode
  gitignore: |
    ??.?
    src/??/file.js
    [a-z]??.*
  cases:
    - path: "ab.c"
      description: ASCII pattern should match ??.?
      ignored: true
    - path: "Ã©x.y"
      description: Mixed unicode should not match ??.? (5 bytes vs 4)
      ignored: false
    - path: "Ä‡.z"
      description: Unicode Ä‡ should match ??.? (2+1 bytes)
      ignored: true
    - path: "src/ab/file.js"
      description: ASCII path should match src/??/file.js
      ignored: true
    - path: "src/Ã©x/file.js"
      description: Mixed unicode path should not match src/??/file.js (Ã©x is 3 bytes)
      ignored: false
    - path: "src/â‚¬/file.js"
      description: 3-byte unicode should not match src/??/file.js
      ignored: false
    - path: "aÃ©x.txt"
      description: a + Ã© (2 bytes) + x should not match [a-z]??.* (4 bytes vs 3)
      ignored: false
    - path: "zab.log"
      description: z + a + b should match [a-z]??.*
      ignored: true
    - path: "1Ã©x.txt"
      description: Should not match [a-z]??.* (starts with number)
      ignored: false

- name: escaped question marks with unicode
  gitignore: |
    file\?.txt
    data\?\?.json
  cases:
    - path: "file?.txt"
      description: Literal ? should match file\?.txt
      ignored: true
    - path: "filea.txt"
      description: Should not match escaped question mark
      ignored: false
    - path: "data??.json"
      description: Literal ?? should match data\?\?.json  
      ignored: true
    - path: "dataab.json"
      description: Should not match escaped question marks
      ignored: false
    - path: "dataÃ©x.json"
      description: Should not match escaped question marks
      ignored: false

- name: boundary cases unicode
  gitignore: |
    ?
    ??
    ???
  cases:
    - path: a
      description: ASCII single byte should match ?
      ignored: true
    - path: Ä‡
      description: 2-byte unicode should not match ? but should match ??
      ignored: true
    - path: â‚¬
      description: 3-byte unicode should not match ? or ?? but should match ???
      ignored: true
    - path: ðŸš€
      description: 4-byte unicode should not match ?, ??, or ???
      ignored: false

- name: stress test many unicode patterns
  gitignore: |
    ?
    ??
    ???
    ????
    file?.txt
    data??.json
    test???.log
    dir????/
    ?.?
    ??.??
    ???.???
  cases:
    - path: a
      ignored: true
    - path: Ä‡
      ignored: true
    - path: â‚¬
      ignored: true
    - path: ðŸš€
      ignored: true
    - path: "file1.txt"
      ignored: true
    - path: "dataÃ©x.json"
      ignored: false
    - path: "testâ‚¬ab.log"
      ignored: false
    - path: "a.b"
      ignored: true
    - path: "Ã©x.ab"
      ignored: false
    - path: "â‚¬ab.Ã©xy"
      ignored: false
